<!DOCTYPE html>
<html>
<head>
	<title>Feedback</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="feedback.css">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
	<!-- Tailwind CSS CDN -->
	<script src="https://cdn.tailwindcss.com"></script>
	<script>
		tailwind.config = {
			theme: {
				extend: {
					colors: {
						border: "hsl(214.3 31.8% 91.4%)",
						input: "hsl(214.3 31.8% 91.4%)",
						ring: "hsl(221.2 83.2% 53.3%)",
						background: "hsl(0 0% 100%)",
						foreground: "hsl(222.2 84% 4.9%)",
						primary: {
							DEFAULT: "hsl(221.2 83.2% 53.3%)",
							foreground: "hsl(210 40% 98%)",
						},
						secondary: {
							DEFAULT: "hsl(210 40% 96.1%)",
							foreground: "hsl(222.2 47.4% 11.2%)",
						},
						destructive: {
							DEFAULT: "hsl(0 84.2% 60.2%)",
							foreground: "hsl(210 40% 98%)",
						},
						muted: {
							DEFAULT: "hsl(210 40% 96.1%)",
							foreground: "hsl(215.4 16.3% 46.9%)",
						},
						accent: {
							DEFAULT: "hsl(210 40% 96.1%)",
							foreground: "hsl(222.2 47.4% 11.2%)",
						},
					},
					borderRadius: {
						lg: "0.5rem",
						md: "calc(0.5rem - 2px)",
						sm: "calc(0.5rem - 4px)",
					},
				},
			},
		}
	</script>
</head>
<body>

<section class="feedback-section">
	<div class="feedback-container">
		<!-- Form Container -->
		<div id="feedback-form-container" class="feedback-card">
			<h1 class="feedback-title">feedback & bug reports</h1>
			<p class="feedback-subtitle">help improve ricey.co by sharing your thoughts or reporting issues</p>
			
			<!-- General Error Message -->
			<div id="general-error" class="error-message" role="alert" aria-live="polite" style="display: none;"></div>
			
			<form id="feedback-form" novalidate>
				<!-- Email Field -->
				<div class="form-group">
				<label for="email" class="form-label">
					email <span class="required">*</span>
				</label>
				<input 
					type="email" 
					id="email" 
					name="email" 
					class="form-input" 
					required 
					aria-label="Email address"
					aria-required="true"
					aria-invalid="false"
					aria-describedby="email-error"
					autocomplete="email"
				/>
				<div id="email-error" class="field-error" role="alert" aria-live="polite"></div>
			</div>
			
			<!-- Issue Field -->
			<div class="form-group">
				<label for="issue" class="form-label">
					issue <span class="required">*</span>
				</label>
				<textarea 
					id="issue" 
					name="issue" 
					class="form-textarea" 
					rows="6" 
					maxlength="500"
					required
					aria-label="Issue description"
					aria-required="true"
					aria-invalid="false"
					aria-describedby="issue-error char-counter"
				></textarea>
				<div class="char-counter-wrapper">
					<span id="char-counter" class="char-counter" aria-live="polite">0/500</span>
				</div>
				<div id="issue-error" class="field-error" role="alert" aria-live="polite"></div>
			</div>
			
			<!-- Image Upload Field -->
			<div class="form-group">
				<label for="image" class="form-label">
					image (optional)
				</label>
				<input 
					type="file" 
					id="image" 
					name="image" 
					class="form-file-input" 
					accept="image/jpeg,image/jpg,image/png,image/heic"
					aria-label="Upload image"
					aria-describedby="image-help image-error"
				/>
				<p id="image-help" class="form-help-text">jpg, jpeg, png, or heic under 5mb</p>
				
				<!-- Image Preview -->
				<div id="image-preview-container" class="image-preview-container" style="display: none;">
					<div class="image-preview-wrapper">
						<img id="image-preview" src="" alt="Image preview" />
						<button type="button" id="remove-image" class="remove-image-btn" aria-label="Remove image">
							<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
							</svg>
						</button>
					</div>
					<div class="image-info">
						<span id="image-name"></span>
						<span id="image-size"></span>
					</div>
				</div>
				
				<!-- Upload Progress -->
				<div id="upload-progress" class="upload-progress" style="display: none;">
					<div class="progress-bar">
						<div id="progress-fill" class="progress-fill"></div>
					</div>
					<span id="progress-text" class="progress-text">0%</span>
				</div>
				
				<div id="image-error" class="field-error" role="alert" aria-live="polite"></div>
			</div>
			
			<!-- Honeypot Field (hidden) -->
			<input 
				type="text" 
				name="website" 
				style="position:absolute;left:-9999px;tabindex=-1;autocomplete=off"
				aria-hidden="true"
			/>
			
			<!-- Submit Button -->
			<div class="form-group">
				<button 
					type="submit" 
					id="submit-btn" 
					class="submit-btn"
					aria-label="Submit feedback"
				>
					<span id="submit-text">submit</span>
					<span id="submit-spinner" class="submit-spinner" style="display: none;">
						<svg class="spinner" width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" stroke-opacity="0.25"/>
							<path d="M12 2C6.477 2 2 6.477 2 12" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
						</svg>
					</span>
				</button>
			</div>
		</form>
	</div>
	
	<!-- Thank You Message -->
	<div id="thank-you-container" class="thank-you-card" style="display: none;" role="alert" aria-live="polite">
		<div class="thank-you-content">
			<svg class="success-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
				<circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
				<path d="M8 12L11 15L16 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
			</svg>
			<h2 class="thank-you-title">thank you for your feedback!</h2>
			<p class="thank-you-message">your submission has been received and will be reviewed.</p>
			<a href="index.html" class="thank-you-link">return to home</a>
		</div>
	</div>
	</div>
</section>

<!-- External Libraries -->
<script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.4/dist/heic2any.min.js"></script>

<!-- Configuration -->
<script src="config.js"></script>

<!-- Main Script -->
<script src="feedback.js"></script>

</body>
</html>
